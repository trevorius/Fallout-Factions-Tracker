# 🔄 GitHub Actions Workflows

This directory contains GitHub Actions workflows for automated testing and quality assurance.

## 🧪 Workflows

### 1. `test.yml` - Main Test Workflow
**Triggers:** Push and Pull Requests to `main` and `develop` branches

**Features:**
- ✅ Runs on Node.js 18.x and 20.x
- 🔍 ESLint code quality checks
- 🏗️ Build verification
- 🧪 Jest unit tests with coverage
- 📊 Codecov integration for coverage reports
- 📈 PR coverage comments

**Steps:**
1. Checkout code
2. Setup Node.js with npm caching
3. Install dependencies
4. Run ESLint
5. Build project
6. Run Jest tests with coverage
7. Upload coverage to Codecov
8. Comment coverage on PRs

### 2. `test-matrix.yml` - Cross-Platform Tests
**Triggers:** Daily at 2 AM UTC, Manual dispatch

**Features:**
- 🔄 Tests across Ubuntu, Windows, and macOS
- 🔧 Tests Node.js versions 18.x, 20.x, and 21.x
- 🚀 Fail-fast disabled for comprehensive testing
- 📊 Test summaries for each matrix combination

## 🛠️ Setup Requirements

### Environment Variables
The workflows require the following environment variables:

- `DATABASE_URL`: Set to a test database URL (mocked in CI)
- `NODE_ENV`: Set to `test` during test execution

### Secrets (Optional)
- `CODECOV_TOKEN`: For uploading coverage reports to Codecov
- `GITHUB_TOKEN`: Automatically provided by GitHub Actions

## 🧪 Local Testing

To run the same tests locally:

```bash
# Install dependencies
npm ci

# Run linting
npm run lint

# Run tests with coverage
npm test -- --coverage --watchAll=false

# Build the project
npm run build
```

## 📊 Coverage Reports

Coverage reports are:
- Generated by Jest during test runs
- Uploaded to Codecov (if token is configured)
- Commented on Pull Requests automatically
- Stored in the `coverage/` directory

## 🔧 Customization

### Adding New Test Commands
To add new test commands, update the workflow files and ensure corresponding npm scripts exist in `package.json`.

### Changing Node.js Versions
Update the `matrix.node-version` arrays in the workflow files to test different Node.js versions.

### Platform Support
The cross-platform workflow tests on:
- Ubuntu (Linux)
- Windows
- macOS

Remove platforms from the `matrix.os` array if not needed.

## 🚀 Performance Optimizations

- **Caching**: npm dependencies are cached using `actions/setup-node@v4`
- **Parallel Execution**: Matrix jobs run in parallel
- **Worker Limits**: `--maxWorkers=2` prevents resource exhaustion in CI
- **Watch Mode Disabled**: `--watchAll=false` for CI environments